
include "io.dx"

:p unsafeIO \().
  withTempFile \fname.
    withFile fname WriteMode \stream.
      fwrite stream $ AsList _ "lorem ipsum\n"
      fwrite stream $ AsList _ "dolor sit amet\n"
    readFile fname
> (AsList 27 "lorem ipsum
> dolor sit amet
> ")


:p unsafeIO \().
  withAlloc 4 \ptr:(Ptr Int).
    for i:(Fin 4). store (ptr +>> ordinal i) (ordinal i)
    result : Fin 4 => Int = tabFromPtr ptr
    result
> [0, 1, 2, 3]
