
map :: (a -> b) -> i>a -> i>b
map f x = for i: f x.i

sum :: k>Real -> Real
sum = reduce add

matmul :: k>Real -> k>j>Real -> i>k>Real
matmul x y = for i j: sum (for k: x.i.k * y.k.j)

dot :: i>Real -> i>Real -> Real
dot x y = sum (for i: x.i * y.i)

outer :: i>Real -> j>Real -> i>j>Real
outer x y = for i j: x.i * y.j

transpose :: i>j>a -> j>i>a
transpose x = for i j: x.j.i
